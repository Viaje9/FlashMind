---
description: "功能實作任務清單模板"
---

# 任務清單：[FEATURE NAME]

**輸入**：`/specs/[###-feature-name]/` 中的設計文件  
**前置條件**：plan.md（必備）、spec.md（使用者故事必備）、research.md、data-model.md、contracts/

**測試**：依憲法之 TDD 規定，所有故事必須先撰寫單元、契約與端對端測試，再進入實作。

**組織方式**：依使用者故事分組，確保每個故事可獨立開發與驗證。

## 格式：`[ID] [P?] [Story] 描述`
- **[P]**：可平行執行（不同檔案、無相依）
- **[Story]**：任務所屬的使用者故事（例如 US1、US2、US3）
- 描述中須包含精確檔案路徑

## 憲法守則
- 覆蓋雲端同步流程，包括離線回放與衝突處理。
- 排程相關任務需引用 FSRS 參數組並加入可重現性驗證。
- Schema 變更必須加入版本化 JSON／Prisma 更新、遷移腳本與自動檢查。
- 每個故事先撰寫測試並確認紅燈，再進行功能實作。
- UI 任務需同步更新 Storybook、Tailwind 樣式與視覺／快照測試。
- 任務切分需保持一個開發週期可完成並避免推測性抽象。

## 路徑慣例
- **單一專案**：`src/`、`tests/` 位於儲存庫根目錄
- **Web 專案**：`backend/src/`、`frontend/src/`
- **行動專案**：`api/src/`、`ios/src/` 或 `android/src/`
- 以下示例以單一專案為基礎，需依 plan.md 調整

<!-- 
  ============================================================================
  以下任務僅為示例，/speckit.tasks 指令必須依實際規格重建。
  ============================================================================
-->

## 階段一：初始化（共用基礎）

**目的**：建立專案骨架與基本環境

- [ ] T001 依實作計畫建立專案目錄結構
- [ ] T002 初始化 [語言] 專案並安裝 [框架] 依賴
- [ ] T003 [P] 設定 Lint 與格式化工具

---

## 階段二：基礎建設（阻擋性前置）

**目的**：啟動任何使用者故事之前必須完成的核心設施

**⚠️ 關鍵**：未完成此階段不得開始任何故事開發

基礎任務示例（須依專案調整）：

- [ ] T004 建立資料庫 Schema 與遷移框架
- [ ] T005 [P] 建置驗證／授權機制
- [ ] T006 [P] 設定 API 路由與中介層架構
- [ ] T007 建立所有故事共用的基礎資料模型
- [ ] T008 配置錯誤處理與記錄機制
- [ ] T009 設定環境組態管理

**檢查點**：基礎完成，可開始平行開發使用者故事

---

## 階段三：使用者故事 1 - [標題]（優先度：P1）🎯 MVP

**目標**：[描述此故事完成後的價值]

**獨立驗證**：[說明如何單獨驗證此故事]

### 使用者故事 1 測試（TDD 強制）⚠️

**注意：先撰寫測試並確認失敗，再進行實作。**

- [ ] T010 [P] [US1] 為 [端點] 撰寫契約測試 `tests/contract/test_[name].ts`
- [ ] T011 [P] [US1] 為 [流程] 撰寫整合測試 `tests/integration/test_[name].ts`

### 使用者故事 1 實作

- [ ] T012 [P] [US1] 建立 [Entity1] 模型 `src/models/[entity1].ts`
- [ ] T013 [P] [US1] 建立 [Entity2] 模型 `src/models/[entity2].ts`
- [ ] T014 [US1] 實作 [Service] `src/services/[service].ts`（依賴 T012、T013）
- [ ] T015 [US1] 實作 [端點／功能] `src/[location]/[file].ts`
- [ ] T016 [US1] 補強驗證與錯誤處理
- [ ] T017 [US1] 建立故事相關日誌

**檢查點**：故事 1 可獨立運作並通過測試

---

## 階段四：使用者故事 2 - [標題]（優先度：P2）

**目標**：[描述故事價值]

**獨立驗證**：[說明獨立測試方式]

### 使用者故事 2 測試（TDD 強制）⚠️

- [ ] T018 [P] [US2] 撰寫契約測試 `tests/contract/test_[name].ts`
- [ ] T019 [P] [US2] 撰寫整合測試 `tests/integration/test_[name].ts`

### 使用者故事 2 實作

- [ ] T020 [P] [US2] 建立 [Entity] 模型 `src/models/[entity].ts`
- [ ] T021 [US2] 實作 [Service] `src/services/[service].ts`
- [ ] T022 [US2] 實作 [端點／功能] `src/[location]/[file].ts`
- [ ] T023 [US2] 與故事 1 元件整合（若需）

**檢查點**：故事 1 與故事 2 均可獨立運作

---

## 階段五：使用者故事 3 - [標題]（優先度：P3）

**目標**：[描述故事價值]

**獨立驗證**：[說明獨立測試方式]

### 使用者故事 3 測試（TDD 強制）⚠️

- [ ] T024 [P] [US3] 撰寫契約測試 `tests/contract/test_[name].ts`
- [ ] T025 [P] [US3] 撰寫整合測試 `tests/integration/test_[name].ts`

### 使用者故事 3 實作

- [ ] T026 [P] [US3] 建立 [Entity] 模型 `src/models/[entity].ts`
- [ ] T027 [US3] 實作 [Service] `src/services/[service].ts`
- [ ] T028 [US3] 實作 [端點／功能] `src/[location]/[file].ts`

**檢查點**：所有故事均可獨立運作

---

[如有更多故事，請依相同結構新增]

---

## 最終階段：潤飾與跨故事作業

**目的**：針對多個故事的共同改善

- [ ] TXXX [P] 更新文件 `docs/`
- [ ] TXXX 重構與程式碼清理
- [ ] TXXX 跨故事效能優化
- [ ] TXXX [P] 擴充單元測試 `tests/unit/`（覆蓋新回歸案例）
- [ ] TXXX 安全性強化
- [ ] TXXX 驗證 `quickstart.md` 步驟

---

## 相依與執行順序

### 階段相依

- **初始化（階段一）**：無相依，可立即開始
- **基礎建設（階段二）**：依賴初始化結果，阻擋所有故事
- **使用者故事（階段三起）**：依賴基礎建設完成，可併行或按優先度依序進行
- **潤飾（最終階段）**：依賴所有目標故事完成

### 使用者故事相依

- **故事 1（P1）**：基礎建設完成後即可開始，無其他相依
- **故事 2（P2）**：基礎建設完成後開始，若需與故事 1 整合，仍須保持可獨立測試
- **故事 3（P3）**：基礎建設完成後開始，與前兩個故事整合時亦須維持獨立驗證能力

### 故事內部順序

- 測試必須先寫並確認失敗，再實作功能
- 模型先於服務
- 服務先於端點
- 核心實作完成後再處理整合
- 完成當前故事後方可移至下一優先度

### 平行化建議

- 所有標記 [P] 的初始化任務可同時進行
- 基礎建設中標記 [P] 的任務可平行（僅限階段二）
- 基礎建設完成後，各故事可由不同成員平行執行
- 同一故事中的測試若標記 [P]，可平行撰寫
- 同一故事中的模型若標記 [P]，可平行開發
- 不同故事可由不同成員併行處理

---

## 實作策略

### MVP 優先（僅故事 1）

1. 完成階段一：初始化
2. 完成階段二：基礎建設（阻擋所有故事）
3. 完成階段三：故事 1
4. **停止並驗證**：獨立測試故事 1
5. 視需求部署／展示

### 漸進式交付

1. 完成初始化與基礎建設 → 基礎穩定
2. 完成故事 1 → 測試 → 部署／展示（MVP）
3. 完成故事 2 → 測試 → 部署／展示
4. 完成故事 3 → 測試 → 部署／展示
5. 每個故事皆能獨立提供價值且不破壞前一故事

### 多人併行策略

1. 團隊一起完成初始化與基礎建設
2. 基礎完成後：
   - 開發者 A：故事 1
   - 開發者 B：故事 2
   - 開發者 C：故事 3
3. 各故事獨立完成後再整合

---

## 注意事項

- [P] 任務代表無相依且可平行處理
- [Story] 標籤能對應任務與使用者故事以利追蹤
- 各故事需保持獨立完成與測試能力
- 確認測試失敗後再著手實作
- 每項任務或合適的任務群組完成後立即提交版本控制
- 任意檢查點皆可停下進行獨立驗證
- 避免模糊任務、同檔案衝突、破壞故事獨立性的交叉依賴
