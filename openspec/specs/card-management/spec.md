# card-management Specification

## Purpose
TBD - created by archiving change add-card-management. Update Purpose after archive.
## Requirements
### Requirement: 檢視牌組內卡片

使用者 SHALL 能夠檢視牌組內的所有卡片。

#### Scenario: 顯示牌組摘要

- **WHEN** 使用者進入牌組詳情頁
- **THEN** 顯示牌組摘要資訊
- **AND** 摘要包含：新卡數、待複習數、建立時間、上次複習時間

#### Scenario: 顯示卡片列表

- **WHEN** 使用者進入牌組詳情頁
- **THEN** 顯示該牌組內所有卡片的列表
- **AND** 每張卡片顯示正面文字
- **AND** 每張卡片顯示第一筆詞義的中文解釋（作為摘要）

#### Scenario: 開始學習入口

- **WHEN** 使用者檢視牌組詳情頁
- **THEN** 提供「開始學習」按鈕
- **AND** 點擊後進入該牌組的學習模式

#### Scenario: 卡片列表為空

- **WHEN** 使用者進入牌組詳情頁
- **AND** 牌組內尚無任何卡片
- **THEN** 顯示空狀態提示「尚無卡片」
- **AND** 顯示引導使用者新增卡片的按鈕

---

### Requirement: 新增卡片

使用者 SHALL 能夠在牌組內新增卡片。

#### Scenario: 開啟新增表單

- **WHEN** 使用者在牌組詳情頁點擊右下角 + 按鈕
- **THEN** 導航至新增卡片頁面
- **AND** 顯示卡片編輯表單

#### Scenario: 填寫正面內容

- **WHEN** 使用者填寫正面欄位
- **THEN** 正面為必填欄位
- **AND** 正面可輸入單字、片語或問題

#### Scenario: 填寫詞義區塊

- **WHEN** 使用者填寫詞義區塊
- **THEN** 每筆詞義包含：中文解釋（必填）
- **AND** 每筆詞義包含：英文例句（選填）
- **AND** 每筆詞義包含：中文例句翻譯（選填）

#### Scenario: 新增詞義區塊

- **WHEN** 使用者點擊「新增詞義」按鈕
- **THEN** 新增一個空白詞義區塊至列表

#### Scenario: 刪除詞義區塊

- **WHEN** 使用者點擊詞義區塊的刪除按鈕
- **AND** 詞義區塊數量大於 1
- **THEN** 該詞義區塊從列表移除

#### Scenario: 詞義區塊最少限制

- **WHEN** 使用者嘗試刪除最後一個詞義區塊
- **THEN** 不允許刪除
- **AND** 刪除按鈕隱藏或停用

#### Scenario: 英文例句語音

- **WHEN** 使用者檢視詞義區塊
- **THEN** 英文例句欄位旁提供播放語音按鈕

#### Scenario: 頁首操作

- **WHEN** 使用者在新增卡片頁面
- **THEN** 頁首顯示「取消」按鈕
- **AND** 頁首顯示「儲存」按鈕

#### Scenario: 儲存成功

- **WHEN** 使用者填寫完畢並點擊「儲存」
- **AND** 正面已填寫
- **AND** 至少有一筆詞義的中文解釋已填寫
- **THEN** 卡片建立成功
- **AND** 返回牌組詳情頁（卡片列表）

#### Scenario: 儲存失敗（驗證錯誤）

- **WHEN** 使用者點擊「儲存」
- **AND** 正面為空
- **THEN** 顯示驗證錯誤訊息「請輸入正面內容」
- **AND** 不建立卡片

#### Scenario: 取消新增

- **WHEN** 使用者點擊「取消」
- **THEN** 返回牌組詳情頁
- **AND** 不儲存任何資料

---

### Requirement: 編輯卡片

使用者 SHALL 能夠編輯現有卡片。

#### Scenario: 進入編輯頁面

- **WHEN** 使用者在卡片列表點擊卡片項目的編輯按鈕
- **THEN** 導航至編輯卡片頁面
- **AND** 表單預填現有卡片內容

#### Scenario: 修改正面內容

- **WHEN** 使用者在編輯頁面修改正面
- **THEN** 可修改正面內容
- **AND** 正面仍為必填

#### Scenario: 修改詞義區塊

- **WHEN** 使用者在編輯頁面修改詞義
- **THEN** 可修改所有詞義區塊的欄位
- **AND** 可新增詞義區塊
- **AND** 可刪除詞義區塊（保留至少一筆）

#### Scenario: 儲存編輯成功

- **WHEN** 使用者修改完畢並點擊「儲存」
- **AND** 驗證通過
- **THEN** 卡片更新成功
- **AND** 返回牌組詳情頁（卡片列表）

---

### Requirement: 刪除卡片

使用者 SHALL 能夠刪除現有卡片。

#### Scenario: 點擊刪除按鈕

- **WHEN** 使用者在卡片列表點擊卡片項目的刪除按鈕
- **THEN** 彈出確認對話框

#### Scenario: 確認對話框內容

- **WHEN** 確認對話框顯示
- **THEN** 對話框標題為「刪除卡片」
- **AND** 說明文字顯示將刪除的卡片正面內容

#### Scenario: 確認刪除

- **WHEN** 使用者在確認對話框點擊「確認」
- **THEN** 卡片刪除成功
- **AND** 卡片從列表移除
- **AND** 對話框關閉

#### Scenario: 取消刪除

- **WHEN** 使用者在確認對話框點擊「取消」
- **THEN** 對話框關閉
- **AND** 卡片保持不變

