## ADDED Requirements

### Requirement: 檢視牌組內卡片

使用者 SHALL 能夠在牌組詳情頁檢視所有卡片。

#### Scenario: 顯示牌組摘要

- **WHEN** 使用者進入牌組詳情頁
- **THEN** 顯示牌組統計資訊：新卡數量、待複習數量、建立時間、上次複習時間
- **AND** 顯示「開始學習」按鈕

#### Scenario: 顯示卡片列表

- **WHEN** 使用者進入牌組詳情頁
- **THEN** 顯示該牌組所有卡片列表
- **AND** 每張卡片顯示正面文字與第一筆詞義摘要

#### Scenario: 空狀態顯示

- **WHEN** 使用者進入牌組詳情頁
- **AND** 該牌組沒有任何卡片
- **THEN** 顯示空狀態提示「尚無卡片」
- **AND** 顯示引導使用者新增卡片的按鈕

#### Scenario: 搜尋卡片

- **WHEN** 使用者在搜尋欄輸入關鍵字
- **THEN** 即時過濾顯示符合關鍵字的卡片
- **AND** 搜尋範圍包含正面文字和詞義內容

---

### Requirement: 新增卡片

使用者 SHALL 能夠在牌組內新增新卡片。

#### Scenario: 開啟新增表單

- **WHEN** 使用者在牌組詳情頁點擊右下角 + 按鈕
- **THEN** 導航至新增卡片頁面
- **AND** 頁面標題為「新增快閃卡」

#### Scenario: 填寫卡片正面

- **WHEN** 使用者填寫正面欄位
- **THEN** 可輸入單字、片語或問題
- **AND** 最大長度為 500 字元

#### Scenario: 填寫卡片背面詞義

- **WHEN** 使用者填寫背面詞義
- **THEN** 每筆詞義包含：中文解釋（必填）、英文例句、中文例句翻譯
- **AND** 預設顯示一個空白詞義區塊

#### Scenario: 新增詞義區塊

- **WHEN** 使用者點擊「新增詞義」按鈕
- **THEN** 新增一個空白詞義區塊
- **AND** 新區塊自動獲得焦點

#### Scenario: 刪除詞義區塊

- **WHEN** 使用者點擊詞義區塊的刪除按鈕
- **AND** 目前有超過一個詞義區塊
- **THEN** 移除該詞義區塊

#### Scenario: 無法刪除最後一個詞義區塊

- **WHEN** 使用者點擊詞義區塊的刪除按鈕
- **AND** 目前只有一個詞義區塊
- **THEN** 刪除按鈕不可點擊或隱藏

#### Scenario: 儲存卡片成功

- **WHEN** 使用者填寫完畢並點擊「儲存」
- **AND** 正面與至少一筆中文解釋已填寫
- **THEN** 卡片儲存至該牌組
- **AND** 導航回牌組詳情頁
- **AND** 新卡片顯示在列表中

#### Scenario: 儲存卡片失敗（驗證錯誤）

- **WHEN** 使用者點擊「儲存」
- **AND** 正面或所有詞義的中文解釋為空
- **THEN** 顯示驗證錯誤訊息
- **AND** 不儲存卡片

#### Scenario: 取消新增

- **WHEN** 使用者點擊「取消」
- **THEN** 導航回牌組詳情頁
- **AND** 不儲存任何資料

---

### Requirement: 編輯卡片

使用者 SHALL 能夠編輯現有卡片。

#### Scenario: 進入編輯模式

- **WHEN** 使用者在卡片列表點擊編輯按鈕
- **THEN** 導航至卡片編輯頁面
- **AND** 表單預填現有卡片資料

#### Scenario: 編輯正面與背面

- **WHEN** 使用者在編輯頁面修改內容
- **THEN** 可修改正面文字和所有詞義區塊

#### Scenario: 儲存編輯成功

- **WHEN** 使用者修改完畢並點擊「儲存」
- **AND** 正面與至少一筆中文解釋已填寫
- **THEN** 卡片更新成功
- **AND** 導航回牌組詳情頁
- **AND** 列表顯示更新後的內容

---

### Requirement: 刪除卡片

使用者 SHALL 能夠刪除現有卡片。

#### Scenario: 點擊刪除按鈕

- **WHEN** 使用者在卡片列表點擊刪除按鈕
- **THEN** 彈出確認對話框
- **AND** 顯示訊息「確定要刪除這張卡片嗎？此操作無法復原。」

#### Scenario: 確認刪除

- **WHEN** 使用者在確認對話框點擊「確認」
- **THEN** 卡片從牌組中刪除
- **AND** 卡片列表更新
- **AND** 牌組統計更新

#### Scenario: 取消刪除

- **WHEN** 使用者在確認對話框點擊「取消」
- **THEN** 對話框關閉
- **AND** 卡片保持不變
