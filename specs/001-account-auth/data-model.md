# 資料模型：帳號與登入

**日期**: 2026-01-11  
**規格來源**: /Users/brian/Documents/SideProject/GitHub/FlashMind/specs/001-account-auth/spec.md

## 實體與關係

### 使用者帳號（UserAccount）

- **描述**: 可登入的使用者主體。
- **主要欄位**:
  - 使用者識別（id）
  - Email（唯一）
  - 密碼雜湊（僅 Email 註冊）
  - 主要登入方式（email / google）
  - 建立時間、更新時間
  - 最近登入時間
  - 帳號狀態（啟用/停用）
- **關係**:
  - 一個使用者帳號可對應多個社交登入識別
  - 一個使用者帳號可對應多個登入工作階段

### 社交登入識別（SocialIdentity）

- **描述**: 對應第三方登入供應商的識別資料。
- **主要欄位**:
  - 供應商（google）
  - 供應商使用者識別（providerUserId）
  - 綁定時間
- **關係**:
  - 多對一：多個社交登入識別對應單一使用者帳號

### 登入工作階段（AuthSession）

- **描述**: 使用者登入後的有效工作階段。
- **主要欄位**:
  - 工作階段識別（sessionToken）
  - 使用者識別（userId）
  - 建立時間
  - 到期時間
  - 撤銷時間
  - 最近活動時間
- **關係**:
  - 多對一：多個工作階段對應單一使用者帳號

## 驗證規則

- Email 必須符合常見格式且唯一
- Email 註冊密碼長度至少 8 字元
- 登入方式僅允許 email / google
- Google 註冊必須提供可驗證的授權憑證（格式由契約定義）

## 狀態轉換

- **使用者登入狀態**: 未登入 → 已登入 → 登出 → 未登入
- **工作階段狀態**: 建立 → 啟用 →（到期或撤銷）→ 無效
