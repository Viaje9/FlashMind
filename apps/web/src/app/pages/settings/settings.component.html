<div class="flex min-h-screen flex-col">
  <fm-page-header title="設定" layout="center">
    <fm-button class="fm-header-left" variant="ghost" size="sm" routerLink="/home">
      <span class="material-symbols-outlined text-[20px]">chevron_left</span>
      返回
    </fm-button>
    <fm-button class="fm-header-right" variant="ghost" size="sm" routerLink="/home">完成</fm-button>
  </fm-page-header>

  <main class="mx-auto w-full max-w-lg flex-1 p-4">
    <div class="space-y-6">
      <fm-profile-card
        [name]="userName()"
        [email]="userEmail()"
        actionLabel="管理帳戶"
      ></fm-profile-card>

      <section>
        <fm-section-heading text="練習設定"></fm-section-heading>
        <div
          class="bg-surface-light dark:bg-surface-dark rounded-2xl overflow-hidden shadow-sm divide-y divide-slate-100 dark:divide-white/5"
        >
          <fm-setting-row
            icon="style"
            iconClass="bg-blue-500/10 text-blue-500"
            label="單字練習設定"
            description="Decks 的學習偏好、提醒與模式"
            variant="link"
            testId="settings-vocab-link"
            (rowClick)="goToVocabSettings()"
          ></fm-setting-row>
          <fm-setting-row
            icon="mic"
            iconClass="bg-orange-500/10 text-orange-500"
            label="口說練習設定"
            description="語音播放、逐字稿與口說偏好"
            variant="link"
            testId="settings-speaking-link"
            (rowClick)="goToSpeakingSettings()"
          ></fm-setting-row>
        </div>
      </section>
    </div>
  </main>

  <footer
    class="sticky bottom-0 border-t border-slate-100 bg-background-light/95 backdrop-blur-sm dark:border-white/10 dark:bg-background-dark/95"
  >
    <div
      class="mx-auto w-full max-w-lg space-y-3 px-4 pb-[calc(env(safe-area-inset-bottom,0px)+1rem)] pt-3"
    >
      <fm-button variant="danger" [fullWidth]="true" (click)="logout()" [disabled]="loading()">
        @if (loading()) {
          登出中...
        } @else {
          登出帳戶
        }
      </fm-button>
      <p class="text-center text-xs text-slate-400 dark:text-slate-600">
        {{ version.displayString }}<br />
        © 2024 FlashMind
      </p>
    </div>
  </footer>
</div>
