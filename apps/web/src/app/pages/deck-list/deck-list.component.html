<div class="relative min-h-screen pb-24">
  <fm-page-header title="FlashMind">
    <fm-icon-button class="fm-header-right" variant="ghost" ariaLabel="設定" routerLink="/settings">
      <span class="material-symbols-outlined text-[22px]">settings</span>
    </fm-icon-button>
  </fm-page-header>

  <main class="mx-auto w-full max-w-md px-4 pt-4">
    <div class="mb-6">
      <fm-search-input [formControl]="searchControl" placeholder="搜尋牌組..." ariaLabel="搜尋牌組"></fm-search-input>
    </div>

    <div class="flex flex-col gap-4">
      @for (deck of decks(); track deck.id) {
        <fm-deck-card
          [title]="deck.title"
          [newCount]="deck.newCount"
          [reviewCount]="deck.reviewCount"
          [progress]="deck.progress"
          [completed]="deck.completed"
          [showAction]="deck.showAction"
          [actionLabel]="deck.actionLabel"
          (actionClick)="onDeckAction(deck.id)"
        ></fm-deck-card>
      }

      @if (showEmptyState()) {
        <fm-empty-state
          icon="library_add"
          [title]="isEmpty() ? '尚無牌組' : '無符合的牌組'"
          [description]="isEmpty() ? '點擊右下角 + 按鈕建立第一個牌組' : '請嘗試其他搜尋條件'"
        ></fm-empty-state>
      }
    </div>

    <div class="h-24"></div>
  </main>

  <div class="fixed bottom-24 right-5 z-40">
    <fm-fab ariaLabel="新增牌組" routerLink="/decks/new">
      <span class="material-symbols-outlined text-[28px]">add</span>
    </fm-fab>
  </div>
</div>
