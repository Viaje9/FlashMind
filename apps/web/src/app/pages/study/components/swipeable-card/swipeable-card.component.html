<div class="swipeable-card-wrapper">
  <!-- 方向指示器 -->
  @if (isActive()) {
    <!-- 右滑指示器 - 知道 -->
    @if (currentDirection() === 'right') {
      <div
        class="swipe-indicator indicator-right"
        [class.triggered]="isTriggered()"
        [style.opacity]="indicatorOpacity()"
      >
        <span class="material-symbols-outlined text-3xl">check</span>
        <span class="indicator-label">知道</span>
      </div>
    }

    <!-- 左滑指示器 - 不知道 -->
    @if (currentDirection() === 'left') {
      <div
        class="swipe-indicator indicator-left"
        [class.triggered]="isTriggered()"
        [style.opacity]="indicatorOpacity()"
      >
        <span class="material-symbols-outlined text-3xl">close</span>
        <span class="indicator-label">不知道</span>
      </div>
    }

    <!-- 上滑指示器 - 不熟 -->
    @if (currentDirection() === 'up') {
      <div
        class="swipe-indicator indicator-up"
        [class.triggered]="isTriggered()"
        [style.opacity]="indicatorOpacity()"
      >
        <span class="material-symbols-outlined text-3xl">help</span>
        <span class="indicator-label">不熟</span>
      </div>
    }
  }

  <!-- 可移動的卡片 -->
  <div
    #cardElement
    class="swipeable-card"
    [class.is-animating]="isAnimating()"
    [class.is-flying-out]="isFlyingOut()"
    [style.transform]="cardTransform()"
  >
    <ng-content></ng-content>
  </div>

  <!-- 拖動把手 -->
  <div #handleArea class="drag-handle-area">
    <div
      #handleElement
      class="drag-handle"
      [class.is-active]="isActive()"
      (pointerdown)="onHandlePointerDown($event)"
      (pointermove)="onHandlePointerMove($event)"
      (pointerup)="onHandlePointerUp($event)"
      (pointercancel)="onHandlePointerCancel($event)"
    >
      <span class="material-symbols-outlined text-2xl">swipe</span>
    </div>
    <p class="hint-text">按住拖動選擇</p>
  </div>
</div>
