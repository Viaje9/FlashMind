<article class="relative bg-surface-light dark:bg-surface-dark rounded-xl p-4 border border-slate-200 dark:border-white/10 shadow-sm transition-all hover:border-primary/30 group" [attr.data-testid]="testId() || null">
  @if (showDelete()) {
    <div class="absolute top-3 right-3 flex gap-2">
      <button
        type="button"
        class="text-slate-300 hover:text-red-500 transition-colors"
        aria-label="刪除詞義"
        (click)="deleteClick.emit()"
      >
        <span class="material-symbols-outlined text-[18px]">close</span>
      </button>
    </div>
  }
  <div class="flex flex-col gap-4">
    @if (tagLabel()) {
      <div class="mb-1">
        <span class="text-xs font-bold text-white bg-primary/90 px-2 py-0.5 rounded">{{ tagLabel() }}</span>
      </div>
    }
    <div>
      <label class="text-xs font-bold text-slate-500 dark:text-slate-400 mb-1.5 block uppercase tracking-wide">中文解釋</label>
      <input
        class="w-full bg-background-light dark:bg-background-dark/50 rounded-lg px-3 py-2.5 text-base text-slate-800 dark:text-white placeholder:text-slate-400 dark:placeholder:text-slate-600 border-none focus:ring-1 focus:ring-primary/50 transition-all"
        type="text"
        placeholder="輸入中文解釋..."
        aria-label="中文解釋"
        [value]="meaning().zhMeaning"
        (input)="onInputChange($event, 'zhMeaning')"
      />
    </div>
    <div>
      <label class="text-xs font-bold text-slate-500 dark:text-slate-400 mb-1.5 block uppercase tracking-wide">英文例句</label>
      <div class="relative">
        <textarea
          class="w-full bg-background-light dark:bg-background-dark/50 rounded-lg px-3 py-2.5 pr-10 text-base text-slate-800 dark:text-white placeholder:text-slate-400 dark:placeholder:text-slate-600 border-none focus:ring-1 focus:ring-primary/50 transition-all resize-none min-h-[72px]"
          placeholder="輸入英文例句..."
          aria-label="英文例句"
          [value]="meaning().enExample"
          (input)="onInputChange($event, 'enExample')"
        ></textarea>
        <button
          type="button"
          class="absolute bottom-2 right-2 p-1.5 rounded-lg transition-colors"
          [class.text-primary]="!isPlayingAudio()"
          [class.hover:bg-primary/10]="!isPlayingAudio()"
          [class.text-green-500]="isPlayingAudio()"
          [class.bg-green-500/10]="isPlayingAudio()"
          aria-label="播放語音"
          (click)="playAudioClick.emit()"
        >
          @if (isPlayingAudio()) {
            <span class="material-symbols-outlined text-[20px] animate-pulse">pause_circle</span>
          } @else {
            <span class="material-symbols-outlined text-[20px]">volume_up</span>
          }
        </button>
      </div>
    </div>
    <div>
      <label class="text-xs font-bold text-slate-500 dark:text-slate-400 mb-1.5 block uppercase tracking-wide">中文例句翻譯</label>
      <textarea
        class="w-full bg-background-light dark:bg-background-dark/50 rounded-lg px-3 py-2.5 text-base text-slate-800 dark:text-white placeholder:text-slate-400 dark:placeholder:text-slate-600 border-none focus:ring-1 focus:ring-primary/50 transition-all resize-none min-h-[48px]"
        placeholder="輸入中文翻譯..."
        aria-label="中文例句翻譯"
        [value]="meaning().zhExample"
        (input)="onInputChange($event, 'zhExample')"
      ></textarea>
    </div>
  </div>
</article>
